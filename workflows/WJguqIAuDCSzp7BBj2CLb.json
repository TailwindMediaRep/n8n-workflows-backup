{
  "active": false,
  "activeVersion": null,
  "activeVersionId": null,
  "connections": {
    "When clicking ‘Execute workflow’": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2026-01-14T08:10:12.290Z",
  "id": "WJguqIAuDCSzp7BBj2CLb",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "JSON_Devoluciones_Pedidos",
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -128,
        0
      ],
      "id": "8bf21e63-0596-4fc3-abec-782ec6a2b1a6",
      "name": "When clicking ‘Execute workflow’"
    },
    {
      "parameters": {
        "url": "https://rulesshop.myshopify.com/admin/api/2026-01/orders/7469679935835/refunds.json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        32,
        0
      ],
      "id": "a5cb98fc-32c1-400a-9086-62a0a2f01e52",
      "name": "HTTP Request",
      "credentials": {
        "httpHeaderAuth": {
          "id": "THkhgrtze1uBo6Ft",
          "name": "Token Informes Shopify"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Obtenemos los datos del nodo anterior (HTTP Request)\n// Asumimos que el HTTP Request devuelve un array con un objeto que tiene \"refunds\"\nconst response = items[0].json;\n\n// Extraemos el PRIMER reembolso de la lista (porque el Webhook envía de uno en uno)\n// Si la API devolvió \"refunds\": [ ... ], tomamos el índice 0.\nconst refundData = response.refunds ? response.refunds[0] : response;\n\n// Construimos el objeto simulando el Webhook completo\nreturn [\n  {\n    json: {\n      headers: {\n        \"connection\": \"upgrade\",\n        \"host\": \"n8n.tailwind.es\",\n        \"x-forwarded-for\": \"127.0.0.1\", // IP simulada\n        \"x-forwarded-proto\": \"https\",\n        \"content-length\": \"3000\",\n        \"user-agent\": \"Shopify-Captain-Hook-Simulation\",\n        \"accept\": \"*/*\",\n        \"accept-encoding\": \"gzip;q=1.0,deflate;q=0.6,identity;q=0.3\",\n        \"content-type\": \"application/json\",\n        \"x-shopify-api-version\": \"2024-01\",\n        \"x-shopify-topic\": \"refunds/create\",\n        \"x-shopify-shop-domain\": \"rulesshop.myshopify.com\", // Puedes personalizar esto\n        \"x-shopify-webhook-id\": \"simulated-webhook-id\"\n      },\n      params: {},\n      query: {},\n      body: refundData, // Aquí metemos los datos reales que trajiste de la API\n      webhookUrl: \"https://n8n.tailwind.es/webhook/simulacion\",\n      executionMode: \"test\"\n    }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        208,
        0
      ],
      "id": "7c77c877-08ca-44b6-b81c-3a05545c001a",
      "name": "Code in JavaScript"
    }
  ],
  "pinData": {},
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "shared": [
    {
      "updatedAt": "2026-01-14T08:10:12.298Z",
      "createdAt": "2026-01-14T08:10:12.298Z",
      "role": "workflow:owner",
      "workflowId": "WJguqIAuDCSzp7BBj2CLb",
      "projectId": "x5UZcmGQw2OWHuXb"
    }
  ],
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2026-02-05T11:47:11.248Z",
  "versionId": "5289257c-bdfc-4a17-a2fc-561a15a6a5d0"
}